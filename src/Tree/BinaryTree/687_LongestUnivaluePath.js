/*
Given the root of a binary tree, return the length of the longest path, where each node in the path has the same value. This path may or may not pass through the root.

The length of the path between two nodes is represented by the number of edges between them.

 

Example 1:


Input: root = [5,4,5,1,1,5]
Output: 2
Example 2:


Input: root = [1,4,5,4,4,5]
Output: 2
 

Constraints:

The number of nodes in the tree is in the range [0, 104].
-1000 <= Node.val <= 1000
The depth of the tree will not exceed 1000.
*/

var longestUnivaluePath = function(root) {
  let longest = 0;
  
  const countLengths = (node) => {
    if (!node) return 0;
    
    const leftCount = node.left
      ? countLengths(node.left) * (node.left.val === node.val)
      : 0;
    const rightCount = node.right
      ? countLengths(node.right) * (node.right.val === node.val)
      : 0;
    
    longest = Math.max(longest, leftCount + rightCount);
    return 1 + Math.max(leftCount, rightCount);
  }
  
  countLengths(root);
  
  return longest;
};

/*

*/

// const maxLen = 100;

// for (let i = 0; i < 50; i += 1) {
//   const len = numberBetween(1, maxLen);
  
//   const nodes = [numberBetween(1, 5)];

//   for(let i = 1; i < len; i += 1) {
//     const parent = Math.ceil(i / 2) - 1;
//     if (nodes[parent] === null) {
//       nodes.push(null);
//     } else if (Math.random() < .05) {
//       nodes.push(null);
//     } else if(Math.random() < .4) {
//       nodes.push(nodes[parent]);
//     } else {
//       nodes.push(numberBetween(1, 5));
//     }
//   }

//   while(nodes[nodes.length - 1] === null) nodes.pop();

//   // logOutList('"' + parenString + '",')
//   // logOutList(printRow([commands, actions]) + ',')
//   logOutList(printRow(nodes) + ',');
//   //   // logOutList(n);
//   //   // logOutList(printRow(actions) + '],')
// }

const tests = [
  [5,4,5,1,1,5],
  [1,4,5,4,4,5],
  [4,4,null,4,4,null,null,4,5,4,5,null,null,null,null,4,1,1,5,5,4,5,5,null,null,null,null,null,null,null,null,5,4,1,1,4,1,2,2,5],
  [5,5,1,1,1,1,1,1,5,3,5,1,1,4,null,5,3,5,1,2,3,5,1,1,4,5,4,4,5,null,null,2,2,1,3,5,1,null,1,3,2,1,1,5,5,3,5,1,2,4,1,2,5,4,1,5,4,null,5,null,null,null,null,3,3,1,2,1,4,2,4,5],
  [2,2,1,3,1,5,5,2,4,1,5,1,1,5,5,4,2,5,2,4,1,5,4,1,null,1,1,5,5,5,2,4,3,3,5,5,5,4,2,4,3,1,1,5,5,4,2,1,1,null,null,1,1,1,5,5,5,5],
  [2,2,4,5,4,4,4,null,5,3,3,4,4,4,4,null,null,3,2,3,3,4,3,4,5,2,1,null,4,3,1,null,null,null,null,2,5,2,2,5,3,3,4,4,3,2,2,4,5,2,null,2,2],
  [1,1,1,1,1,5,1,1],
  [5,5,5,3,4,5,5,3,5,4,4,2,2,5,3,1,2,2,5,1,4,1,4,5,null,2,2,5,5],
  [3,3,5],
  [3,1,3,2,3,2],
  [4,4,5,2,4,5,5,4,4,null,4,1,null,1,5,4,2,4,5,null,null,4,4,5,5,null,null,4,4,1,5,4,1,2,4,4,4,5,2,null,null,null,null,4,4,4,1,1,2,5,5,null,null,null,null,null,1,5,4],
  [5,3,5,3,2,5,5,null,3,5,2,5,5,1,3,null,null,3,1,5,2,2,3,1,1,3,3,4,4,3,3,null,null,null,null,3,2,4,1,5,5,2,2,5,2,3,3,3,4,5,2,3,5,2,5,3,4,4,2,5,3,2],
  [3,4,1,4,4,1,4,4,4,4,5,1,3,4,4,1,4,null,3,4,4,5,5,5,1,5,3,5,3,3,3,5,4,5,2,null,null,3,3],
  [4,5,4,5,5,3,2,5,4,5,4,4,4,2,5,2,3,5,5,null,1,2,1,3,5,5,4,2,3,5,5,null,2,3,1,5,1,5,2,null,null,1,2,3,1,5,5,5,2,2,5,1,5,1,4,1,2,1,3,4,1,3,2,null,null,2,4,5,1,2,1,2,5,4,null,5,1,2,2,null,null,null,null,3,1,3,2,4,3,1,3,null,null,5,4,3,5,4,2,4],
  [4,2,5,2,2,4,1,2,1,null,2,4,4,1,2,2,2,1,5,null,null,2,2,4,3,4,2,5,1,2,2,3,2,3,1,1,1,5,5,null,null,null,null,4,2,2,2,5,4],
  [2,3,3,3,3,1,2,3,2,3,3,4,null,2,2,2,1,3,4,5,1,3,3,2,5,null,null,5,4,1,2,2,1,4,4,null,3,5,4,5,5,4,1,1],
  [5,1,1,1,3,4,5,null,2,3,1,4,1,5,5,null,null,4,2,1,3,1,1,5,1,5,1,5,5,2,5,null,null,null,null,2,3,2,2,null,1,1,5,2,1,1,1,5,1,1,2,5,3,5,3,5,5,2,5,1,4,5,5,null,null,null,null,null,null,null,null,2,2,3,3,3,3,2,3,null,null,2,5,5,2,2,5,4,4,4,1],
  [3,4,3,5,1,3,3,5,2,4,5,5,3,3,3,1,2,2,2,5,4,5,5,5,1,3,3,5,2,5,3,1,1,2,3,2,1,5,2,5,4,null,4,5,5,5,5,1,5,3,1,4,2,3,4,4,5,2,2,1,3,3,4,4,2,1,1,4,1,3],
  [3,3,3,3,3,3,3,3,3,5,5,2,5,5,5,3,4,3,5,2],
  [2,2,4,2,3,4,4,null,2,5,3,2,1,1,5,null,null,2,4,1,4,3,1,2,2,2,1,1,null,5,3,null,null,null,null,4,2,1,4,4,4,4,4,3,3,1,2,4,3,5,2,1,null,5],
  [1,3,5,5,3,5,5,1,5,1,5,2,1,3,5,1,3,5,5,3],
  [4,4,4,2,4,2,null,2,2,4,1,2,2,null,null,2,5,2,5,1,1,5,1,2,2,3,1,null,null,null,null,2,4,5,3,4,1,3,5,2,1,2,2,5,5,4,1,1,3,4,4,5,3,5,1],
  [5,3,5,5,2,4,5,3,5,5,3,4,5,4,5,3,null,5,5,5,5,4,4,4,2,5,1,3,5,2,5,2,4,null,null,1,1],
  [1,2,1,3,2,1,3,3,null,2,4,1,1,3,3,5,3,null,null,2,2,4,null,2,5,1,1,3,2,4,3,3,5,3,3,null,null,null,null,2,5,2,null,null,2,null,null,4,2,5,5,1,1,1,4,3,3,2,4,4,4,3,2,null,3,4,2,3,5,3],
  [1,1,4,1,3,1,1,3,4,null,3,4,1,1,2,3,5,5,4,null,null,5,5,3,4,1,3,1,3,2,2,4,3,5,5,3,3,5,4,null,null,null,null,2,4,5,1,3,2,null,4,1,1,1,1,1,1,3,3,2],
  [2,2,3,5,2,5,3,1,5,3,5,2,4,4,3,1,1,5,5,3,3,3,5,3,null,2,4,4,4,2,3,1,2,4,3,5,5,5,4,3,5,3,3,4,3,5,4,3,1,null,null,2,1,4,4,2,4,1,4,3,1,5,4,1,1,2,2,4,4,1,2,5,5,5,5,5,1,4,4,3,null,5,5,2,3],
  [2,2,2,2,1,2,2,3,4,5,1,2,1,2,5,5,1,1,4,5,4,1],
  [3,4,3,4,4,3,5,4,5,4,null,3,1,5,null,4,2,2,4],
  [4,4,4,5,1,3,4,5,4,2,1,4,2,null,3,3,1,3,2,null,3,1,1,4,1,2,2],
  [1,1,2,3,1,4,2,1,2,1,1,4,4,2,4,1,3,2,2,1,5,5,2,4,1,2,2,3,5,4],
  [5,2,5,3,2,5,5,4,2,2,2,5,5,4,null,2,4,5,2,2,2,null,5,5,4,1,5,4,1,null,null,2,2,4,5,5,5,4,2,1,4,4,2,null,null,3,5,3,5,2,2,1,4,1,2,2,4,3,2,null,null,null,null,2,2,3,null,4,4,4,5,5,4,5,5,4,4,3,1,1,1,4,4,2,4,5,2],
  [1,1,1,1,1,1,1,4,1,1,1,1,5,1,2,5,4,3,4,1,1,1,4,4,1,4,5,2,1,1,2,3,5,5,1,5,3,5],
  [3,1,3,1,1,5,3,5,1,1,5,5,5,3,3,4,5,1,1,1,2,1,2,3,5,5,3,2,3,3,2,5,4,1],
  [4,2,5,1,null,1,2,4,1,null,null,3,1,2,2,4,4,1,1,null,null,null,null,1,3,1,1,3,2,1,null,3,null,4,4,1,1,1,5,null,null,null,null,null,null,null,null,1,1,3,2,4,1,1,1,1,4,4,1,3,1,null,null,3,1,null,null,1,4,2,null,1,1,1,3,4,2,5,5,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,1],
  [2,2,2,4,5,2,2,4,4,5,1,2,1,null,2,2,3,1,2,5,5,1,5,3,2,2,1,null,null,2,2],
  [3,3,1,3,3,4,1,3,5,5,3,4,4,3],
  [3,3,2,3,3,2,2,4,5,3,3,2,3,2,2,null,4,4,5,3,3,4,3,4,2,3,3,5,2,3,2,null,null,2,4,5,3,5,5,3,1,3,5,4,null,3,2,1,1,2,null,3,3,3,3,2,2,2,2,1,3,2,1,null,null,null,null,2,2,1,4,4,4,4,3,5,5,5,3,3],
  [1,2,2,3,2,2,2,3,3,2,5,5,1,2,3,3,3,1,3,2,1,3,4,5,5,1,1,2,2,4,4,3,5,3,5,1,1,3,2,1,1,1,1,3],
  [3,3,3,5,1,1,1,5,3,1,3,1,5,2,null,5,5,null,5,4,1,5,3,3,1,3,5,4,2,null,null,5,2,3,null,null,null,3,4,4,4,1,1,4,1,null,3,3,1,1,1,3,5,null,5,4,4,2,1,null,null,null,null,1,2,4,2,4,5,null,null,null,null,null,null,2,3,1,5,4,4,4,2,4,5,1,2,2,4,3,1],
  [4,1,1,1,1,1,1,3,4],
  [2,2,2,2,2,2,5,2,2,2,1,1,1,4,4,5,2,2,1,2,4,1,1,2,1,1,1,5,1,5,4,5,5,3,2,4,3,1,1,2,1,5,5,2,4,4,1,2,1,1,1,1,2,1,3,4,5,1,1,2,5,4,4,5,4,5],
  [4,2,4,null,4,2,2,null,null,1,4,1,2,2,4,null,null,null,null,1,1,1,2,2,1,5,5,null,2,3,1,null,null,null,null,null,null,null,null,5,null,1,1,1,1,1,null,2,2,5,4,5,4,5,5,null,null,2,1,2,3,1,1],
  [4,4,null,5,3,null,null,5,5,4,3,null,null,null,null,3,5,5,null,1,4,2,5],
  [5,5,5,5,5,5,5,2,1,5,5,5,2,5,5,2,2,2,1,5,5,5,1,2,1,1,2,3,1,5,5,2,1,2,5,2,2,1,5,5,5,5,5,5,5,1,3,2,2,1,1,1,3,2,2,3,3,1,null,5,1,3,5,2,2,1,3,3,2,2,null,2,2,2,null,3,1,5,5,2,2,5,2,2,2,1],
  [5,1,5,1,1,5,1,5,1,3,2,5],
  [4,4,3,2,4,3,null,2,2,4,4,3,3,null,null,5,2,2,5,2,4,4,2,3,3,5,1,null,null,null,null,null,3,2,4,2,4,5,1,2],
  [1,3,5,4,5,5,5,4,4,5,5,5,5],
  [5,2,3,2,2,4,3,null,4,2,1,4,1,1,3,null,null,3,2,4,2,5,1,3,4,2,1,3,1,5,5,null,null,null,null,5,3,4,2,3,4,4,2,5,5,3,5,null,5,4,4,1,2,1,1,5,4,1,5,5,5,5,4,null,null,null,null,null,null,null,null,1,5,3,3,1,4,2,2,4,4,4,4],
  [3,3,5,1,2,4,1,4,1,5,3,4,5,1,1,5,5,1,1,1,5,5,4],
];

let i = 0;
for (let test of tests) {
  const tree = buildTree(test);
  console.time(i);
  logOutList(longestUnivaluePath(tree));
  console.timeEnd(i);
  i += 1;
}

/*
[5,4,5,1,1,5]
[1,4,5,4,4,5]
[4,4,null,4,4,null,null,4,5,4,5,null,null,null,null,4,1,1,5,5,4,5,5,null,null,null,null,null,null,null,null,5,4,1,1,4,1,2,2,5]
[5,5,1,1,1,1,1,1,5,3,5,1,1,4,null,5,3,5,1,2,3,5,1,1,4,5,4,4,5,null,null,2,2,1,3,5,1,null,1,3,2,1,1,5,5,3,5,1,2,4,1,2,5,4,1,5,4,null,5,null,null,null,null,3,3,1,2,1,4,2,4,5]
[2,2,1,3,1,5,5,2,4,1,5,1,1,5,5,4,2,5,2,4,1,5,4,1,null,1,1,5,5,5,2,4,3,3,5,5,5,4,2,4,3,1,1,5,5,4,2,1,1,null,null,1,1,1,5,5,5,5]
[2,2,4,5,4,4,4,null,5,3,3,4,4,4,4,null,null,3,2,3,3,4,3,4,5,2,1,null,4,3,1,null,null,null,null,2,5,2,2,5,3,3,4,4,3,2,2,4,5,2,null,2,2]
[1,1,1,1,1,5,1,1]
[5,5,5,3,4,5,5,3,5,4,4,2,2,5,3,1,2,2,5,1,4,1,4,5,null,2,2,5,5]
[3,3,5]
[3,1,3,2,3,2]
[4,4,5,2,4,5,5,4,4,null,4,1,null,1,5,4,2,4,5,null,null,4,4,5,5,null,null,4,4,1,5,4,1,2,4,4,4,5,2,null,null,null,null,4,4,4,1,1,2,5,5,null,null,null,null,null,1,5,4]
[5,3,5,3,2,5,5,null,3,5,2,5,5,1,3,null,null,3,1,5,2,2,3,1,1,3,3,4,4,3,3,null,null,null,null,3,2,4,1,5,5,2,2,5,2,3,3,3,4,5,2,3,5,2,5,3,4,4,2,5,3,2]
[3,4,1,4,4,1,4,4,4,4,5,1,3,4,4,1,4,null,3,4,4,5,5,5,1,5,3,5,3,3,3,5,4,5,2,null,null,3,3]
[4,5,4,5,5,3,2,5,4,5,4,4,4,2,5,2,3,5,5,null,1,2,1,3,5,5,4,2,3,5,5,null,2,3,1,5,1,5,2,null,null,1,2,3,1,5,5,5,2,2,5,1,5,1,4,1,2,1,3,4,1,3,2,null,null,2,4,5,1,2,1,2,5,4,null,5,1,2,2,null,null,null,null,3,1,3,2,4,3,1,3,null,null,5,4,3,5,4,2,4]
[4,2,5,2,2,4,1,2,1,null,2,4,4,1,2,2,2,1,5,null,null,2,2,4,3,4,2,5,1,2,2,3,2,3,1,1,1,5,5,null,null,null,null,4,2,2,2,5,4]
[2,3,3,3,3,1,2,3,2,3,3,4,null,2,2,2,1,3,4,5,1,3,3,2,5,null,null,5,4,1,2,2,1,4,4,null,3,5,4,5,5,4,1,1]
[5,1,1,1,3,4,5,null,2,3,1,4,1,5,5,null,null,4,2,1,3,1,1,5,1,5,1,5,5,2,5,null,null,null,null,2,3,2,2,null,1,1,5,2,1,1,1,5,1,1,2,5,3,5,3,5,5,2,5,1,4,5,5,null,null,null,null,null,null,null,null,2,2,3,3,3,3,2,3,null,null,2,5,5,2,2,5,4,4,4,1]
[3,4,3,5,1,3,3,5,2,4,5,5,3,3,3,1,2,2,2,5,4,5,5,5,1,3,3,5,2,5,3,1,1,2,3,2,1,5,2,5,4,null,4,5,5,5,5,1,5,3,1,4,2,3,4,4,5,2,2,1,3,3,4,4,2,1,1,4,1,3]
[3,3,3,3,3,3,3,3,3,5,5,2,5,5,5,3,4,3,5,2]
[2,2,4,2,3,4,4,null,2,5,3,2,1,1,5,null,null,2,4,1,4,3,1,2,2,2,1,1,null,5,3,null,null,null,null,4,2,1,4,4,4,4,4,3,3,1,2,4,3,5,2,1,null,5]
[1,3,5,5,3,5,5,1,5,1,5,2,1,3,5,1,3,5,5,3]
[4,4,4,2,4,2,null,2,2,4,1,2,2,null,null,2,5,2,5,1,1,5,1,2,2,3,1,null,null,null,null,2,4,5,3,4,1,3,5,2,1,2,2,5,5,4,1,1,3,4,4,5,3,5,1]
[5,3,5,5,2,4,5,3,5,5,3,4,5,4,5,3,null,5,5,5,5,4,4,4,2,5,1,3,5,2,5,2,4,null,null,1,1]
[1,2,1,3,2,1,3,3,null,2,4,1,1,3,3,5,3,null,null,2,2,4,null,2,5,1,1,3,2,4,3,3,5,3,3,null,null,null,null,2,5,2,null,null,2,null,null,4,2,5,5,1,1,1,4,3,3,2,4,4,4,3,2,null,3,4,2,3,5,3]
[1,1,4,1,3,1,1,3,4,null,3,4,1,1,2,3,5,5,4,null,null,5,5,3,4,1,3,1,3,2,2,4,3,5,5,3,3,5,4,null,null,null,null,2,4,5,1,3,2,null,4,1,1,1,1,1,1,3,3,2]
[2,2,3,5,2,5,3,1,5,3,5,2,4,4,3,1,1,5,5,3,3,3,5,3,null,2,4,4,4,2,3,1,2,4,3,5,5,5,4,3,5,3,3,4,3,5,4,3,1,null,null,2,1,4,4,2,4,1,4,3,1,5,4,1,1,2,2,4,4,1,2,5,5,5,5,5,1,4,4,3,null,5,5,2,3]
[2,2,2,2,1,2,2,3,4,5,1,2,1,2,5,5,1,1,4,5,4,1]
[3,4,3,4,4,3,5,4,5,4,null,3,1,5,null,4,2,2,4]
[4,4,4,5,1,3,4,5,4,2,1,4,2,null,3,3,1,3,2,null,3,1,1,4,1,2,2]
[1,1,2,3,1,4,2,1,2,1,1,4,4,2,4,1,3,2,2,1,5,5,2,4,1,2,2,3,5,4]
[5,2,5,3,2,5,5,4,2,2,2,5,5,4,null,2,4,5,2,2,2,null,5,5,4,1,5,4,1,null,null,2,2,4,5,5,5,4,2,1,4,4,2,null,null,3,5,3,5,2,2,1,4,1,2,2,4,3,2,null,null,null,null,2,2,3,null,4,4,4,5,5,4,5,5,4,4,3,1,1,1,4,4,2,4,5,2]
[1,1,1,1,1,1,1,4,1,1,1,1,5,1,2,5,4,3,4,1,1,1,4,4,1,4,5,2,1,1,2,3,5,5,1,5,3,5]
[3,1,3,1,1,5,3,5,1,1,5,5,5,3,3,4,5,1,1,1,2,1,2,3,5,5,3,2,3,3,2,5,4,1]
[4,2,5,1,null,1,2,4,1,null,null,3,1,2,2,4,4,1,1,null,null,null,null,1,3,1,1,3,2,1,null,3,null,4,4,1,1,1,5,null,null,null,null,null,null,null,null,1,1,3,2,4,1,1,1,1,4,4,1,3,1,null,null,3,1,null,null,1,4,2,null,1,1,1,3,4,2,5,5,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,1]
[2,2,2,4,5,2,2,4,4,5,1,2,1,null,2,2,3,1,2,5,5,1,5,3,2,2,1,null,null,2,2]
[3,3,1,3,3,4,1,3,5,5,3,4,4,3]
[3,3,2,3,3,2,2,4,5,3,3,2,3,2,2,null,4,4,5,3,3,4,3,4,2,3,3,5,2,3,2,null,null,2,4,5,3,5,5,3,1,3,5,4,null,3,2,1,1,2,null,3,3,3,3,2,2,2,2,1,3,2,1,null,null,null,null,2,2,1,4,4,4,4,3,5,5,5,3,3]
[1,2,2,3,2,2,2,3,3,2,5,5,1,2,3,3,3,1,3,2,1,3,4,5,5,1,1,2,2,4,4,3,5,3,5,1,1,3,2,1,1,1,1,3]
[3,3,3,5,1,1,1,5,3,1,3,1,5,2,null,5,5,null,5,4,1,5,3,3,1,3,5,4,2,null,null,5,2,3,null,null,null,3,4,4,4,1,1,4,1,null,3,3,1,1,1,3,5,null,5,4,4,2,1,null,null,null,null,1,2,4,2,4,5,null,null,null,null,null,null,2,3,1,5,4,4,4,2,4,5,1,2,2,4,3,1]
[4,1,1,1,1,1,1,3,4]
[2,2,2,2,2,2,5,2,2,2,1,1,1,4,4,5,2,2,1,2,4,1,1,2,1,1,1,5,1,5,4,5,5,3,2,4,3,1,1,2,1,5,5,2,4,4,1,2,1,1,1,1,2,1,3,4,5,1,1,2,5,4,4,5,4,5]
[4,2,4,null,4,2,2,null,null,1,4,1,2,2,4,null,null,null,null,1,1,1,2,2,1,5,5,null,2,3,1,null,null,null,null,null,null,null,null,5,null,1,1,1,1,1,null,2,2,5,4,5,4,5,5,null,null,2,1,2,3,1,1]
[4,4,null,5,3,null,null,5,5,4,3,null,null,null,null,3,5,5,null,1,4,2,5]
[5,5,5,5,5,5,5,2,1,5,5,5,2,5,5,2,2,2,1,5,5,5,1,2,1,1,2,3,1,5,5,2,1,2,5,2,2,1,5,5,5,5,5,5,5,1,3,2,2,1,1,1,3,2,2,3,3,1,null,5,1,3,5,2,2,1,3,3,2,2,null,2,2,2,null,3,1,5,5,2,2,5,2,2,2,1]
[5,1,5,1,1,5,1,5,1,3,2,5]
[4,4,3,2,4,3,null,2,2,4,4,3,3,null,null,5,2,2,5,2,4,4,2,3,3,5,1,null,null,null,null,null,3,2,4,2,4,5,1,2]
[1,3,5,4,5,5,5,4,4,5,5,5,5]
[5,2,3,2,2,4,3,null,4,2,1,4,1,1,3,null,null,3,2,4,2,5,1,3,4,2,1,3,1,5,5,null,null,null,null,5,3,4,2,3,4,4,2,5,5,3,5,null,5,4,4,1,2,1,1,5,4,1,5,5,5,5,4,null,null,null,null,null,null,null,null,1,5,3,3,1,4,2,2,4,4,4,4]
[3,3,5,1,2,4,1,4,1,5,3,4,5,1,1,5,5,1,1,1,5,5,4]
*/
