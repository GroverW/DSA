/*
Median is the middle value in an ordered integer list. If the size of the list is even, there is no middle value. So the median is the mean of the two middle value.

Examples:
[2,3,4] , the median is 3

[2,3], the median is (2 + 3) / 2 = 2.5

Given an array nums, there is a sliding window of size k which is moving from the very left of the array to the very right. You can only see the k numbers in the window. Each time the sliding window moves right by one position. Your job is to output the median array for each window in the original array.

For example,
Given nums = [1,3,-1,-3,5,3,6,7], and k = 3.

Window position                Median
---------------               -----
[1  3  -1] -3  5  3  6  7       1
 1 [3  -1  -3] 5  3  6  7       -1
 1  3 [-1  -3  5] 3  6  7       -1
 1  3  -1 [-3  5  3] 6  7       3
 1  3  -1  -3 [5  3  6] 7       5
 1  3  -1  -3  5 [3  6  7]      6
Therefore, return the median sliding window as [1,-1,-1,3,5,6].

Note:
You may assume k is always valid, ie: k is always smaller than input array's size for non-empty array.
Answers within 10^-5 of the actual value will be accepted as correct.
*/

// (people doing binary search + splice are getting better runtimes)
// w/ heap
var medianSlidingWindow = function (nums, k) {
  const minHeap = new Heap((a, b) => nums[a] < nums[b]);
  const maxHeap = new Heap((a, b) => nums[a] > nums[b]);
  const medians = [];

  for (let i = 0; i < k; i += 1) {
    if (nums[i] >= nums[maxHeap.arr[0]] || nums[i] >= nums[minHeap.arr[0]]) minHeap.push(i);
    else maxHeap.push(i);

    while (minHeap.size - maxHeap.size > 1) maxHeap.push(minHeap.pop());
    while (maxHeap.size - minHeap.size > 1) minHeap.push(maxHeap.pop());
  }

  if (minHeap.size === maxHeap.size) {
    const median = (nums[minHeap.arr[0]] + nums[maxHeap.arr[0]]) / 2;
    medians.push(median);
  } else if (minHeap.size > maxHeap.size) {
    const median = nums[minHeap.arr[0]];
    medians.push(median);
  } else {
    const median = nums[maxHeap.arr[0]];
    medians.push(median);
  }

  let start = 0;
  for (let i = k; i < nums.length; i += 1) {
    minHeap.has(start) ? minHeap.remove(start) : maxHeap.remove(start);
    start += 1;

    if (nums[i] >= nums[maxHeap.arr[0]] || nums[i] >= nums[minHeap.arr[0]]) minHeap.push(i);
    else maxHeap.push(i);

    while (minHeap.size - maxHeap.size > 1) maxHeap.push(minHeap.pop());
    while (maxHeap.size - minHeap.size > 1) minHeap.push(maxHeap.pop());

    if (minHeap.size === maxHeap.size) {
      const median = (nums[minHeap.arr[0]] + nums[maxHeap.arr[0]]) / 2;
      medians.push(median);
    } else if (minHeap.size > maxHeap.size) {
      const median = nums[minHeap.arr[0]];
      medians.push(median);
    } else {
      const median = nums[maxHeap.arr[0]];
      medians.push(median);
    }
  }

  return medians;
};

class Heap {
  constructor(comparator) {
    this.comparator = comparator;
    this.size = 0;
    this.arr = [];
    this.lookup = {};
  }

  has(element) {
    return (element in this.lookup);
  }

  push(element) {
    this.arr.push(element);
    this.siftUp(this.arr.length - 1);
    this.size += 1;
  }

  pop() {
    return this.remove(this.arr[0]);
  }

  remove(element) {
    const arr = this.arr;
    const idx = this.lookup[element];
    const last = arr.length - 1;

    delete this.lookup[element];
    this.size -= 1;
    if (idx === last) return arr.pop();

    [arr[idx], arr[last]] = [arr[last], arr[idx]];
    const res = arr.pop();

    const parent = Math.max(0, Math.ceil(idx / 2) - 1);
    if (this.comparator(arr[idx], arr[parent])) this.siftUp(idx);
    else this.siftDown(idx);

    return res;
  }

  siftDown(start) {
    let current = start;
    const arr = this.arr;

    while (true) {
      const left = current * 2 + 1;
      const right = left + 1;
      let next = current;

      if (this.comparator(arr[left], arr[next])) next = left;
      if (this.comparator(arr[right], arr[next])) next = right;

      if (next !== current) {
        this.lookup[arr[next]] = current;
        [arr[current], arr[next]] = [arr[next], arr[current]];
        current = next;
      } else break;
    }

    this.lookup[arr[current]] = current;
  }

  siftUp(start) {
    let current = start;
    const arr = this.arr;

    while (current > 0) {
      const parent = Math.ceil(current / 2) - 1;
      let next = current;

      if (this.comparator(arr[next], arr[parent])) next = parent;

      if (next !== current) {
        this.lookup[arr[next]] = current;
        [arr[current], arr[next]] = [arr[next], arr[current]];
        current = next;
      } else break;
    }

    this.lookup[arr[current]] = current;
  }
}

/*

*/

// const maxLen = 100;
// for (let i = 0; i < 50; i += 1) {
//   const len = Math.floor(Math.random() * maxLen) + 1;
//   const k = Math.floor(Math.random() * len / 2) + 1;

//   const nums = new Array(len).fill(0)
//     .map(() => Math.floor(Math.random() * 200) - 100);

//   // logOutList('"' + encoded + '",')
//   logOutList(printRow([nums, k]) + ',')
//   // logOutList(printRow(tasks));
//   // logOutList(n);
//   // logOutList(printRow(actions) + '],')
// }

const tests = [
  [[1, 3, -1, -3, 5, 3, 6, 7], 3],
  [[-9, -5, -9, 31, 26, 38, 34, -44, -49, -77, -57, 17, 63, 7, -79, 71, 80, 80, 86, 13, 57, -77, 93, -33, -74, 63, 0, -30, 24, 13, 55, -96, 45, 99, -33, -37], 13],
  [[69, 6, -13, -7, -38, -52, 21, 59, 62, -75, 39, 75, -21, -19, -32, 93, 3, -54, -83, -60, 4, -99, -89, 8, -79, 60, -67, -11, -31, 27, 94, 69, -90], 14],
  [[-57, -84, 83, -24, 90, 54, 18, -25, 97, 15, -49, -90, -73, 54, -65, -3, 90, -63, -30, 82, 19], 7],
  [[66, -55, -5, 41, -22, 10, 23, 55, 77, -47, -2, -47, 42, 61, 39, -51, -72, -13, -36, -79, 76, 98, 87, 28, -47, -88, 2, -83, 25, 81, 64, 13, -71, 76, -69, -4, 79, 35, -93, 67, -23, 48, -41, 2, 72, 0, 53, 98, -6, 1, -59, 3, -64, -52, -38, 1, 67, -99, -95, 28, -16, -63, 88, 76, -49, -10, -19, -97, -100, 97, 63, -95, -6, 86, -63, -89, -49, -53], 21],
  [[57, 48, -86, -48], 1],
  [[-62, -31, -69, 6, -19, 61, 73, -4, 6, 54, 15, 68, -37, -8, 59, -96, -98, 18, 88, -50, -4, -45, 15, -23, -47, -61, 65, 65, 36, -22, 27, -67, -14, -8, 70, -11, -85, -54, 13, 9, 81, 87, 49, -72, -58, -18, 40, 56, -45, -10, 45, 34, -97, 34, -41, 35, 37, 97, 15, -56, -8, 63, 37, 83, -25, 62, -65, 74, 24, -15, 37, 57, 23, -69, -95, 18, 10, 63, -34, 98, 18, 79, 6, 23, -21, 49, -67, 91, -46, -43, -29, -65, 89, -68, 53, 28], 28],
  [[67, -78, -98, -28, 35, -62, 77, -31, 37, 94, -60, 26, 49, -21, -53, 29, -24, -64, -6, -68, -10, -25, 92, 3, -98, -4, 30, -45, -58, 81, 13, -62, -84, -37, -48, -44, -22, 41, 21, -85, 45, -91, 17, -80, -30, 42, 96, -5, -70, -27, -53, 76, -48, 16, 0, 81, -46, 54, -37, -92, 33, -84], 21],
  [[5, 14, 69, -95, -35, 4, -80, -93, -83, -48, 56, 89, 18], 6],
  [[-20, -76, 41, 8, -5, 54, 6, 24, -91, 62, 21, 8, 2, 62, -23, -16, -4, 94, -53, -6, -55, -36, -33, -5, -24, 49, 33, -16, -5, -51, 33, -55, -68, -96, -25, 33, 86, 62, 68, 5, -26, 55, 74, -40, 62, -7, -97, -66, -91, 37, -91, -50, 50, 71, 50, -99, -74, 29, 14, -61, -57, -26, -16, 1, 31, 80, 27, 4, 94], 23],
  [[83, 42, 79, 52, -30, 30, 17, -66, -49, 65, -24, 88, 97, -62, 21, -78, -7, 19, 53, -17, -48, -50, -28, 93, 92, -12, 91, -45, -4, -16, 5, -18, -44, 48, 26, -86, -83, 41, 37, -14, 10, -38, 55, 9, -31, -62, 22, -34, 65, 92, 83, 15, 28, 14, -15, -61, 37, 61, 97, -45, -80, 99, -50, 6, -53, 65, 36, 40, -22, -42, -1, -84, 61, -19, -21, 0, 87, -56, -5, -11, 24, -75, -72, 46, -78, -100], 20],
  [[-69, 77, 42, 19, 99, -64, 19, -30, -98, -66, 16, 58, -8, -20, -48, -70, 39, -12, 55, -57, 27, 8, -14, 66, 10, 87, -47, -88, -38, -10, 5, -16, 25, -96, 73, -46, 81, 61, 68, 65, -3, -43, 24, 69, 98, 14, 32, 70, 28, -80, 41, -72, 44, -14, -88, 40, 0, 14, 52, 80, -23, 2, -53, -51, -25], 17],
  [[-26, -9, -82, 1, -7, 31, -15, -15, -30, 10, 26, -18, 53, 90, 8, -3, 52, -68, 68, -76, 97, -28, 37, 48, -46, -48, -4, -83, 67, 16, -87, 16, -82, -94, 58, -36, 72, 68, 0, 87, 75, -30, 76, -100, -38, 66, 74, -25, -9, -35, -39, 5, 73, -24, -71, -76, 98, 92, -5, 61, -23, 54, 16, 81, 79, 46, 56, 58, 87, 31, 99, 44, -53, 38, -6, -35, 24, 63, -80, 23, -5, 47, -27, 40, 80], 22],
  [[-84, -14, -71, -45, 55, -84, 44, 85, -21, 17, -44, 61, 11, 1, -34, 19, -80, 1, 46, 10, 92, 15, 89], 7],
  [[-10, 49, 87, -27, 6, 96, -99, 1, 63, -12, -71, -52, -89, -50, -79, 31, 94, 1, 7, 43, -61, 51, 93, 91, -56, 5, 81, -17, 54, -86, 41, 2, 97, -98, -37, 92, 60, -81, -85, 58, -20, 26, -5, 81, 83, 22, 31], 8],
  [[-28, -65, -26, 80, 40, -41, 12, 12, 35, 97, -12, -14, -43, 26, -93, -42, -79, -22, -54, 34, 58, -49, 61, -37, 68, -30, 77, -7, 73, -51, 59, 21], 1],
  [[31, 86, 99, -16, -60, -63, -33, -13, -60, -79, -2, -72, 13, -27, -27, -43, -63, -57, -4, 63, -12, 1, 19, 3, -50, 70, 6, 57, 37, -73, 26, -50, 84, -29, -43, -85, -55, 27, -61, -2, -19, -38, -100, -71, 64, 22, -97, 1, 84, 52, 3, 75, 30, 57, -26, -1, 33, -19, 64, 42, 78, 33, -93, -70, 25, 5, 60, -43, -58, 99, -54, -54, 25, -53, -52, -49], 27],
  [[-19, 40, 85, -38, -68, -71, -3, -64, 91, 31, -54, -17, -83, -16, -96, -37, -32, 39, 76, -48, 48, 16, -85, 46, -54, 44, -56, 91, -63, 44, 59, -35, 52, 72, 19, 58, -7, -42, 31, -99, -9, -49, -86, -73, -77, 26, 42, 3, 31], 7],
  [[37, -34, 4, -38, -30, -51, -25, 11, 25, 49, -75, -98, 96, 58, 68, -2, 13, 46, 58, 29, -92, 53, -70, -56, -69, 50, 56, 58, 18, 70, -15, 38, 75, -30, -20, 28, -51, -23, -27, 4, -19, -21, -89, -47, -25, -87, 94, 68, -22, 69, -12, -67, 9, -57, 12, 37, -85], 9],
  [[-67, -10], 1],
  [[0, -9, 8, 67, -50, 49, -79, 0, -6, 13, -30, -60, 13, 44, 12, 34, -94, -79, -55, 40, 28, 7, 65, -33, -43, 75, -38, 92, -46, 33, 96, 93, -44, -77, 0, 9, 22, -25, -83, -7, 53, -84, 76, 95, -67, -13, -23, 46, 16, -15, -54, -7, -69, 10, 54, -45, 28, -88, 52, 74, 0, -11, 43, -37, -83, 10, -92, 39, -54, -63, -71, -74, -97, 21, 45, -74, 24, 12, 16, -28, 70, 49, -15, 68, -38], 39],
  [[-59, 27, 38, 40, -12, -30, 11, -6, -24, -26, -83, 68, 3, -28, 68, 28, 61, -79, -35, -13, -92, 95, 97], 11],
  [[86, 20, 76], 1],
  [[-24, 60, -26, -99, 39, -28, -88, 90, 2, 86, 64, 0, 69, -33, 61, 83, -33, -93, 47, -85, 81, 46, -17, 84, 16, -77, 93, 60, 45, -10, 97, -80, 1, 76, -64, -37, -36, 89, 45, 46, -58, -79, 38, 0, 46, -60, -62, 90, 2, -84, 25, 86, 2, -43, -72, -93, 13, -14, 22, -4, -14, -75, -1, -92], 5],
  [[-1, 98], 1],
  [[20, 40, -4, -7, -95, 14, 63, 99, -81, -99, -17, 82, -19, -65, 29, -62, 21, 74, -22, 45, -3, 32, -38, 42, -59, -100, 29, -9, 29, -23, 16, -24, 27, 38, -89, 99, -61, -81, 2, 68, 85, -79, 65, -37, 96, 69, -68, 53, 10, -31, 94, 78, -96, 87, 69, -35, -49, -33, 57, -71, 43, 85, 44, -100, -44, 78, -31, 57, 76, 30, 50, -36, -75, 18, 80, -34, -45, -47, -13, -23, -94, 70, -26, 55, -38], 3],
  [[-2, -87, -91, -50, 36, 55, 62, 67, -81, -25, -57, 67, 78, 77, -98, -32, -97, 54, 31, -77, -23, 67, -38], 10],
  [[-38, -67, -44, 2, -11, -62, 89, -93, 3, -47, 12, -76, -2, 93, -51, 78, -92, -32, 76, 27, 62, 28, 86, -74, -5, 49, 72, -12, -24, -1, -35, -84, 17, 25, 31, -33, -3, -30], 2],
  [[-18, 69, 93, 77, -28, -9, -89, 94, 76, 22, 97, 22, 82, 37, -67, -25, 93, -39, -75, 94, -80, 41, -91, 77, 88, 7, 85, 69, -74, 73, 65, -65, 28, 93, 14, 57, 26, -56, -12, 53, 7, 82, -45, 32, 11, 65, -15, -26, 43, -50, 55, 3, 4, 70, 68, -24, -70, -87, -14, -44, -22, 75, -2, 11, 63], 9],
  [[63, -83, 77, -63, -85, -61, 83, 52, -61, -99, 26, -26, -30, -62, -84, -11, -4, 21, 3, -54, 37, -19, 36], 1],
  [[32, 50, 71, -17, 0, 72, -42, -79, -30, -100, 94, -81, -34, 42, -83, 10, 57, 61, 19, -81, 62, -98, 64, 93, 25, -73, -82, 32, 50, 50, 98, -72, 74, 93, -17, -90, 68, 57, -36, -97, -1, 4, -24, -14, 61, 32, -43, 2, 26, 8, 95, 98, 10, 24, 58, -60, 80, 95, 66, -24, -96, 60, -79, 9, 11, -99, -41, -79, -85, 58, -76, 38, -22, 13, 33, -46, 93, -90, -84, 49, 23, 96, -12, -91, -93, 74, 4, -71, -24, -93, 49, 65], 23],
  [[19, -18, -85, -2, -40, 1, 63, 75, -86, 5, -8, 63, 34, 73, -22, 72, -85, 36, 5, -70, 77, -31, -19, -9, -13, 60, 47, 99, -33, -8, -58, 2, -43, -3, -15, -60, 23, -48, -80, -74, -62, -42, -34, 95, -2, -78, -96, -98, 67, -28, -66, -22, -34, 6, 65, 23, 92, -89, -15, -50, 80, 35, -89, 94, 26, -65, 31, 18, 89, 42, -50, -98, 85, -42, 47, 97, 95, -30, 86, -21, -97, -43, -17, 61, -23, -61, 93, 32, 58, 20, 69, -88, 26, -86, -53, 55, 81, 1, -72, -19], 13],
  [[15, -10, -82, -63, 77, 57, 64, 16, -29, -95, 34, 54, 81, -59, -78, -14, 25, 47, 58, 73, 69, 63, 16, 81, -97, -39, 1, -74, 52, -22, -4, -81, 18, -10, -75, -50, 78, -68, -93, 78, -58, 76, -48, 91, -26, 54, -9, 5, 3, -9, 24, 48, -70, 47, 98, 10, -14, -26, -46, 13, 86, 22, -95, 20, -88, 50, -21, -86, 30], 32],
  [[50, 33, 77, -21, 69, -5, -56, 1, 31, 82, -27, 58, 37, -88, -23, -35, 14, 95, -2, -4, 0, 73, -81, 22, 67, 96, -44, -61, 45, -67, -84, -95, 99, -71, -76, 35, -57, 9, 85, -98, 38, -55, 28, -82, -80, -93, 2], 15],
  [[69, -78, 43, -44, -68, -2, -77, -16], 4],
  [[69, 3, 69, -41, -30, 77, 51, -1, 69, -44, -62, 65, 73, 4, 59, -36, 24, -32, 22, 54, 89, 30, 30, -6, -31, -61, -16, -50, -35, 63, 47, 15, -23, -92, -15, -6, -77, -40, -78, -70, 41, -30, 66, -41, 8], 17],
  [[51, -1, -75, 66, 9, -87, -92, 34, 25, -97, 34, 55, -19, 16, 32, -42, -31, 97, -6, 66, -66, -4, 42, -29, -74, 38, 79, -58, 87, -11, 5, 85, 72, -44, -82, -75, 85, 95, 88, 96, 10, -51, 43, 29, 77, 46, 12, 86, -26, 85, -40, 22, 82, -5, 28, 55, -24, -43, 37, 99, -74, 39, 30], 2],
  [[36, 52, 28, 61, -15, 39, -47, 54, 48, 86, -90, 87, 77, -61, 73, 17, 28, -23, 40, -73, 37, 22, -26, -24, -88, -96, 88, -21, -72, -53, -42, 73, -40, 5, 40, -88, -100, -60, -29, -10, -65, -2, 29, 55, 78, 51, 55, 88, -86, -41, -6, 24, -39, 3, 35, -19, 53, -19, -85, 56, 32, -23, -22, 66, 89, -67, 88, -8, -76, 66, 24, 42, 37, -43, 49, -80, 56, 67, -37, -37, 4, 97, -48], 17],
  [[-61, -44, 63, 24, 58, -69, -52, 63, 80, 45, -3, -41, 0, -13, 99, 89, 11, -22, 15, -57, 82, 0, 46, -9, 39, -5, -45, -23, 22, -34, 77, 27, 36, 52, -30, 25, 75, -20, 63, 44, -32, 17, 94, -50, -97, -94, 50, -77], 19],
  [[79, -43, -49, -37, 56, 57, 3, 10, 6, -49, -78, -78, 26, -39, 91, -45, 62, -75, -14, 93, -59, 61, 72, -44, -72, 11, 51, 3, 90, -81, 25, -59, 34, 40, -34, 33, 89, -41, -38, 7, -74], 2],
  [[20, -96, -49, 94, 28, -12, 62, -3, -32, -97, 65, 85, 15, -48, -72, -71, -40, 74, 97, -22, -82, -70, 12, 7, -93, 42, -43, 74, -78, -14, -78, 53, -30, -30, 16, 28, 4, -86, 4, -75, 92, -46, -81, -94, -55], 20],
  [[42, 79, 24, -60, 51, 67, -43, 17, -27, -98, 95, 66, -65, -52, -21, 58, -26, 53, -22, 45, -24, 51, 19, 31, -73, -96, -14, -89, -99, -78, -14, -20, -60, -55, 5, -28, 91, 89, -19, -37, 13, -99, 67, 73, -24, 69, -34, -81, -58], 10],
  [[-97, -88, -99, -98, 28, 83, 11, 80, 78, -88, 30, -7, -93, -21, -90, -92, 45, 27, -97, -45, -95, 8, -16, 57, 18, -41, 66, -61, 25, 23, 86, 85, 20, 12, 16, -21, 79, -32, -97, 99, 68, -16, -23, 65, -39, -29, 24, 25, -74, 31, -77, 62, -29, -16, 0, 42, 4, 29, 48, -100, -76, -47, 14, -18, 13, -59, 96, 75, 58, 63, -60, -66, 48, -84, -54, 35, 0, -87, -50, 80, 33, 86, 71], 7],
  [[-43, -84, -32, -63, 30, 80, 58, 42, 20, 62, 51, 4, 88, -90, -83, 59, -2, 8, -94, -52, -4, -42, -34, -36, -79, -83, -53, 25, -60], 6],
  [[96, 26, 61, 67, -82, 91, -50, -33, 17, 56, -78, -47, 74, -100, -66, 69, -45, -95, 82, -24, 91, -73, -68, 13, -5, 32, 86, -32, 5, -8, -35, 41, -7, -8, 19, 25, 49, -75, 88, 67, -77, -89], 1],
  [[-75, -53, 70, -62, -46, 40, -17, -87, -63, 16, -76, 55, -90, 20, -51, 6, 11, 7, -11, 65, -6, -49, 52, 23, 15, 38, 27, 33, -24, 47, -36, -18, 22, 27, -29, 38, 94, 27, 59, -97, -21, -67, -84, 20, 94, -43, -48, 90, 49, 95, 12, 80, -32, 3, 30, 79, 81, -33, 82, -24, -64, -65, -69, -46, -75, 15, 22, 30, 82, -99, 47, -97, -6, 78, -33, -13, -28, 94, -36, 85, -18, -81, -69, -39], 8],
  [[-93, 77, -12, 26, -94, -84, 80, -56, 29, -16, -74, 81, 42, 47, 96, 64, -86, 87, -53, 84, -71, -97, 71, 77, -64, -43, 65, 23, -18, -75, -33, -43, -76, 75, -25, -65, -45, -85, 30, 11, -77, -99, 39, 74, -94, 52, 2, 43, 43, 46, -84, 85, 16, -98, 56, 36, 97, 75, -32, 13, -71, 93, 94, -58, -71, 93, -50, 91, 17, -60, 91, -28, -83, -10, -68, 95, 15, -24, 52, 5, 68], 36],
  [[27, -46, -15, 39, 15, 75, 78, 22, 2, -20, 97, 21, -21, -89, 90, 57, -25, -31, 32, 32, 92, 34, 81, 99, 84, -100, -31, 37, 68, -54, -4, 15, -78, 39, -28, 83, 17, -24, -35, -51, 0, 71, -1, 62, 67, 55, -77], 13],
  [[30, -99, -81, 35, 53, -85, -92, -12, 68, -84, -38, -34, 51, -86, 72, -63, -62, -66, -81, -45, -71, -39, 11, -74, 93, -78, 63, 98, -100, 2, 8, 65, -92, -19, -86, 80, 91, 14, 86, -43, -83, 17, 29, -89, -30, 80, -55, -37, 1, -39], 5],
  [[0, -4, -17, -96, 58, -13, 94, 47, 23, -2, -22, -45, 77, -34, -23, -98, -38, 19, -70, 47, 45, -89, 19, 76, -77, -5, -23, 82, 76, 44, -19, 9, 54, -37, 41, -96, 97, 19, 54, 95, -47, 60, 51, 45, -1, -71, 90, 57, 32], 17],
  [[-2, -10, 13, -58, 73, 83, 60, 52, -29, -34, -1, -39, -13, 47, 90, -14, 4, 19, 55, 23, 73, -36, 14, -13, 91, 52, -44, -32, 60, -18, -83, -24, -25, -71, 32, -75, 33, 79, -1, -38, -10, 18, -2], 11],
];

let i = 0;
for (let test of tests) {
  console.time(i);
  logOutList(printRow(medianSlidingWindow(...test)));
  console.timeEnd(i);
  i += 1;
}

/*
[1, 3, -1, -3, 5, 3, 6, 7]
3
[-9, -5, -9, 31, 26, 38, 34, -44, -49, -77, -57, 17, 63, 7, -79, 71, 80, 80, 86, 13, 57, -77, 93, -33, -74, 63, 0, -30, 24, 13, 55, -96, 45, 99, -33, -37]
13
[69, 6, -13, -7, -38, -52, 21, 59, 62, -75, 39, 75, -21, -19, -32, 93, 3, -54, -83, -60, 4, -99, -89, 8, -79, 60, -67, -11, -31, 27, 94, 69, -90]
14
[-57, -84, 83, -24, 90, 54, 18, -25, 97, 15, -49, -90, -73, 54, -65, -3, 90, -63, -30, 82, 19]
7
[66, -55, -5, 41, -22, 10, 23, 55, 77, -47, -2, -47, 42, 61, 39, -51, -72, -13, -36, -79, 76, 98, 87, 28, -47, -88, 2, -83, 25, 81, 64, 13, -71, 76, -69, -4, 79, 35, -93, 67, -23, 48, -41, 2, 72, 0, 53, 98, -6, 1, -59, 3, -64, -52, -38, 1, 67, -99, -95, 28, -16, -63, 88, 76, -49, -10, -19, -97, -100, 97, 63, -95, -6, 86, -63, -89, -49, -53]
21
[57, 48, -86, -48]
1
[-62, -31, -69, 6, -19, 61, 73, -4, 6, 54, 15, 68, -37, -8, 59, -96, -98, 18, 88, -50, -4, -45, 15, -23, -47, -61, 65, 65, 36, -22, 27, -67, -14, -8, 70, -11, -85, -54, 13, 9, 81, 87, 49, -72, -58, -18, 40, 56, -45, -10, 45, 34, -97, 34, -41, 35, 37, 97, 15, -56, -8, 63, 37, 83, -25, 62, -65, 74, 24, -15, 37, 57, 23, -69, -95, 18, 10, 63, -34, 98, 18, 79, 6, 23, -21, 49, -67, 91, -46, -43, -29, -65, 89, -68, 53, 28]
28
[67, -78, -98, -28, 35, -62, 77, -31, 37, 94, -60, 26, 49, -21, -53, 29, -24, -64, -6, -68, -10, -25, 92, 3, -98, -4, 30, -45, -58, 81, 13, -62, -84, -37, -48, -44, -22, 41, 21, -85, 45, -91, 17, -80, -30, 42, 96, -5, -70, -27, -53, 76, -48, 16, 0, 81, -46, 54, -37, -92, 33, -84]
21
[5, 14, 69, -95, -35, 4, -80, -93, -83, -48, 56, 89, 18]
6
[-20, -76, 41, 8, -5, 54, 6, 24, -91, 62, 21, 8, 2, 62, -23, -16, -4, 94, -53, -6, -55, -36, -33, -5, -24, 49, 33, -16, -5, -51, 33, -55, -68, -96, -25, 33, 86, 62, 68, 5, -26, 55, 74, -40, 62, -7, -97, -66, -91, 37, -91, -50, 50, 71, 50, -99, -74, 29, 14, -61, -57, -26, -16, 1, 31, 80, 27, 4, 94]
23
[83, 42, 79, 52, -30, 30, 17, -66, -49, 65, -24, 88, 97, -62, 21, -78, -7, 19, 53, -17, -48, -50, -28, 93, 92, -12, 91, -45, -4, -16, 5, -18, -44, 48, 26, -86, -83, 41, 37, -14, 10, -38, 55, 9, -31, -62, 22, -34, 65, 92, 83, 15, 28, 14, -15, -61, 37, 61, 97, -45, -80, 99, -50, 6, -53, 65, 36, 40, -22, -42, -1, -84, 61, -19, -21, 0, 87, -56, -5, -11, 24, -75, -72, 46, -78, -100]
20
[-69, 77, 42, 19, 99, -64, 19, -30, -98, -66, 16, 58, -8, -20, -48, -70, 39, -12, 55, -57, 27, 8, -14, 66, 10, 87, -47, -88, -38, -10, 5, -16, 25, -96, 73, -46, 81, 61, 68, 65, -3, -43, 24, 69, 98, 14, 32, 70, 28, -80, 41, -72, 44, -14, -88, 40, 0, 14, 52, 80, -23, 2, -53, -51, -25]
17
[-26, -9, -82, 1, -7, 31, -15, -15, -30, 10, 26, -18, 53, 90, 8, -3, 52, -68, 68, -76, 97, -28, 37, 48, -46, -48, -4, -83, 67, 16, -87, 16, -82, -94, 58, -36, 72, 68, 0, 87, 75, -30, 76, -100, -38, 66, 74, -25, -9, -35, -39, 5, 73, -24, -71, -76, 98, 92, -5, 61, -23, 54, 16, 81, 79, 46, 56, 58, 87, 31, 99, 44, -53, 38, -6, -35, 24, 63, -80, 23, -5, 47, -27, 40, 80]
22
[-84, -14, -71, -45, 55, -84, 44, 85, -21, 17, -44, 61, 11, 1, -34, 19, -80, 1, 46, 10, 92, 15, 89]
7
[-10, 49, 87, -27, 6, 96, -99, 1, 63, -12, -71, -52, -89, -50, -79, 31, 94, 1, 7, 43, -61, 51, 93, 91, -56, 5, 81, -17, 54, -86, 41, 2, 97, -98, -37, 92, 60, -81, -85, 58, -20, 26, -5, 81, 83, 22, 31]
8
[-28, -65, -26, 80, 40, -41, 12, 12, 35, 97, -12, -14, -43, 26, -93, -42, -79, -22, -54, 34, 58, -49, 61, -37, 68, -30, 77, -7, 73, -51, 59, 21]
1
[31, 86, 99, -16, -60, -63, -33, -13, -60, -79, -2, -72, 13, -27, -27, -43, -63, -57, -4, 63, -12, 1, 19, 3, -50, 70, 6, 57, 37, -73, 26, -50, 84, -29, -43, -85, -55, 27, -61, -2, -19, -38, -100, -71, 64, 22, -97, 1, 84, 52, 3, 75, 30, 57, -26, -1, 33, -19, 64, 42, 78, 33, -93, -70, 25, 5, 60, -43, -58, 99, -54, -54, 25, -53, -52, -49]
27
[-19, 40, 85, -38, -68, -71, -3, -64, 91, 31, -54, -17, -83, -16, -96, -37, -32, 39, 76, -48, 48, 16, -85, 46, -54, 44, -56, 91, -63, 44, 59, -35, 52, 72, 19, 58, -7, -42, 31, -99, -9, -49, -86, -73, -77, 26, 42, 3, 31]
7
[37, -34, 4, -38, -30, -51, -25, 11, 25, 49, -75, -98, 96, 58, 68, -2, 13, 46, 58, 29, -92, 53, -70, -56, -69, 50, 56, 58, 18, 70, -15, 38, 75, -30, -20, 28, -51, -23, -27, 4, -19, -21, -89, -47, -25, -87, 94, 68, -22, 69, -12, -67, 9, -57, 12, 37, -85]
9
[-67, -10]
1
[0, -9, 8, 67, -50, 49, -79, 0, -6, 13, -30, -60, 13, 44, 12, 34, -94, -79, -55, 40, 28, 7, 65, -33, -43, 75, -38, 92, -46, 33, 96, 93, -44, -77, 0, 9, 22, -25, -83, -7, 53, -84, 76, 95, -67, -13, -23, 46, 16, -15, -54, -7, -69, 10, 54, -45, 28, -88, 52, 74, 0, -11, 43, -37, -83, 10, -92, 39, -54, -63, -71, -74, -97, 21, 45, -74, 24, 12, 16, -28, 70, 49, -15, 68, -38]
39
[-59, 27, 38, 40, -12, -30, 11, -6, -24, -26, -83, 68, 3, -28, 68, 28, 61, -79, -35, -13, -92, 95, 97]
11
[86, 20, 76]
1
[-24, 60, -26, -99, 39, -28, -88, 90, 2, 86, 64, 0, 69, -33, 61, 83, -33, -93, 47, -85, 81, 46, -17, 84, 16, -77, 93, 60, 45, -10, 97, -80, 1, 76, -64, -37, -36, 89, 45, 46, -58, -79, 38, 0, 46, -60, -62, 90, 2, -84, 25, 86, 2, -43, -72, -93, 13, -14, 22, -4, -14, -75, -1, -92]
5
[-1, 98]
1
[20, 40, -4, -7, -95, 14, 63, 99, -81, -99, -17, 82, -19, -65, 29, -62, 21, 74, -22, 45, -3, 32, -38, 42, -59, -100, 29, -9, 29, -23, 16, -24, 27, 38, -89, 99, -61, -81, 2, 68, 85, -79, 65, -37, 96, 69, -68, 53, 10, -31, 94, 78, -96, 87, 69, -35, -49, -33, 57, -71, 43, 85, 44, -100, -44, 78, -31, 57, 76, 30, 50, -36, -75, 18, 80, -34, -45, -47, -13, -23, -94, 70, -26, 55, -38]
3
[-2, -87, -91, -50, 36, 55, 62, 67, -81, -25, -57, 67, 78, 77, -98, -32, -97, 54, 31, -77, -23, 67, -38]
10
[-38, -67, -44, 2, -11, -62, 89, -93, 3, -47, 12, -76, -2, 93, -51, 78, -92, -32, 76, 27, 62, 28, 86, -74, -5, 49, 72, -12, -24, -1, -35, -84, 17, 25, 31, -33, -3, -30]
2
[-18, 69, 93, 77, -28, -9, -89, 94, 76, 22, 97, 22, 82, 37, -67, -25, 93, -39, -75, 94, -80, 41, -91, 77, 88, 7, 85, 69, -74, 73, 65, -65, 28, 93, 14, 57, 26, -56, -12, 53, 7, 82, -45, 32, 11, 65, -15, -26, 43, -50, 55, 3, 4, 70, 68, -24, -70, -87, -14, -44, -22, 75, -2, 11, 63]
9
[63, -83, 77, -63, -85, -61, 83, 52, -61, -99, 26, -26, -30, -62, -84, -11, -4, 21, 3, -54, 37, -19, 36]
1
[32, 50, 71, -17, 0, 72, -42, -79, -30, -100, 94, -81, -34, 42, -83, 10, 57, 61, 19, -81, 62, -98, 64, 93, 25, -73, -82, 32, 50, 50, 98, -72, 74, 93, -17, -90, 68, 57, -36, -97, -1, 4, -24, -14, 61, 32, -43, 2, 26, 8, 95, 98, 10, 24, 58, -60, 80, 95, 66, -24, -96, 60, -79, 9, 11, -99, -41, -79, -85, 58, -76, 38, -22, 13, 33, -46, 93, -90, -84, 49, 23, 96, -12, -91, -93, 74, 4, -71, -24, -93, 49, 65]
23
[19, -18, -85, -2, -40, 1, 63, 75, -86, 5, -8, 63, 34, 73, -22, 72, -85, 36, 5, -70, 77, -31, -19, -9, -13, 60, 47, 99, -33, -8, -58, 2, -43, -3, -15, -60, 23, -48, -80, -74, -62, -42, -34, 95, -2, -78, -96, -98, 67, -28, -66, -22, -34, 6, 65, 23, 92, -89, -15, -50, 80, 35, -89, 94, 26, -65, 31, 18, 89, 42, -50, -98, 85, -42, 47, 97, 95, -30, 86, -21, -97, -43, -17, 61, -23, -61, 93, 32, 58, 20, 69, -88, 26, -86, -53, 55, 81, 1, -72, -19]
13
[15, -10, -82, -63, 77, 57, 64, 16, -29, -95, 34, 54, 81, -59, -78, -14, 25, 47, 58, 73, 69, 63, 16, 81, -97, -39, 1, -74, 52, -22, -4, -81, 18, -10, -75, -50, 78, -68, -93, 78, -58, 76, -48, 91, -26, 54, -9, 5, 3, -9, 24, 48, -70, 47, 98, 10, -14, -26, -46, 13, 86, 22, -95, 20, -88, 50, -21, -86, 30]
32
[50, 33, 77, -21, 69, -5, -56, 1, 31, 82, -27, 58, 37, -88, -23, -35, 14, 95, -2, -4, 0, 73, -81, 22, 67, 96, -44, -61, 45, -67, -84, -95, 99, -71, -76, 35, -57, 9, 85, -98, 38, -55, 28, -82, -80, -93, 2]
15
[69, -78, 43, -44, -68, -2, -77, -16]
4
[69, 3, 69, -41, -30, 77, 51, -1, 69, -44, -62, 65, 73, 4, 59, -36, 24, -32, 22, 54, 89, 30, 30, -6, -31, -61, -16, -50, -35, 63, 47, 15, -23, -92, -15, -6, -77, -40, -78, -70, 41, -30, 66, -41, 8]
17
[51, -1, -75, 66, 9, -87, -92, 34, 25, -97, 34, 55, -19, 16, 32, -42, -31, 97, -6, 66, -66, -4, 42, -29, -74, 38, 79, -58, 87, -11, 5, 85, 72, -44, -82, -75, 85, 95, 88, 96, 10, -51, 43, 29, 77, 46, 12, 86, -26, 85, -40, 22, 82, -5, 28, 55, -24, -43, 37, 99, -74, 39, 30]
2
[36, 52, 28, 61, -15, 39, -47, 54, 48, 86, -90, 87, 77, -61, 73, 17, 28, -23, 40, -73, 37, 22, -26, -24, -88, -96, 88, -21, -72, -53, -42, 73, -40, 5, 40, -88, -100, -60, -29, -10, -65, -2, 29, 55, 78, 51, 55, 88, -86, -41, -6, 24, -39, 3, 35, -19, 53, -19, -85, 56, 32, -23, -22, 66, 89, -67, 88, -8, -76, 66, 24, 42, 37, -43, 49, -80, 56, 67, -37, -37, 4, 97, -48]
17
[-61, -44, 63, 24, 58, -69, -52, 63, 80, 45, -3, -41, 0, -13, 99, 89, 11, -22, 15, -57, 82, 0, 46, -9, 39, -5, -45, -23, 22, -34, 77, 27, 36, 52, -30, 25, 75, -20, 63, 44, -32, 17, 94, -50, -97, -94, 50, -77]
19
[79, -43, -49, -37, 56, 57, 3, 10, 6, -49, -78, -78, 26, -39, 91, -45, 62, -75, -14, 93, -59, 61, 72, -44, -72, 11, 51, 3, 90, -81, 25, -59, 34, 40, -34, 33, 89, -41, -38, 7, -74]
2
[20, -96, -49, 94, 28, -12, 62, -3, -32, -97, 65, 85, 15, -48, -72, -71, -40, 74, 97, -22, -82, -70, 12, 7, -93, 42, -43, 74, -78, -14, -78, 53, -30, -30, 16, 28, 4, -86, 4, -75, 92, -46, -81, -94, -55]
20
[42, 79, 24, -60, 51, 67, -43, 17, -27, -98, 95, 66, -65, -52, -21, 58, -26, 53, -22, 45, -24, 51, 19, 31, -73, -96, -14, -89, -99, -78, -14, -20, -60, -55, 5, -28, 91, 89, -19, -37, 13, -99, 67, 73, -24, 69, -34, -81, -58]
10
[-97, -88, -99, -98, 28, 83, 11, 80, 78, -88, 30, -7, -93, -21, -90, -92, 45, 27, -97, -45, -95, 8, -16, 57, 18, -41, 66, -61, 25, 23, 86, 85, 20, 12, 16, -21, 79, -32, -97, 99, 68, -16, -23, 65, -39, -29, 24, 25, -74, 31, -77, 62, -29, -16, 0, 42, 4, 29, 48, -100, -76, -47, 14, -18, 13, -59, 96, 75, 58, 63, -60, -66, 48, -84, -54, 35, 0, -87, -50, 80, 33, 86, 71]
7
[-43, -84, -32, -63, 30, 80, 58, 42, 20, 62, 51, 4, 88, -90, -83, 59, -2, 8, -94, -52, -4, -42, -34, -36, -79, -83, -53, 25, -60]
6
[96, 26, 61, 67, -82, 91, -50, -33, 17, 56, -78, -47, 74, -100, -66, 69, -45, -95, 82, -24, 91, -73, -68, 13, -5, 32, 86, -32, 5, -8, -35, 41, -7, -8, 19, 25, 49, -75, 88, 67, -77, -89]
1
[-75, -53, 70, -62, -46, 40, -17, -87, -63, 16, -76, 55, -90, 20, -51, 6, 11, 7, -11, 65, -6, -49, 52, 23, 15, 38, 27, 33, -24, 47, -36, -18, 22, 27, -29, 38, 94, 27, 59, -97, -21, -67, -84, 20, 94, -43, -48, 90, 49, 95, 12, 80, -32, 3, 30, 79, 81, -33, 82, -24, -64, -65, -69, -46, -75, 15, 22, 30, 82, -99, 47, -97, -6, 78, -33, -13, -28, 94, -36, 85, -18, -81, -69, -39]
8
[-93, 77, -12, 26, -94, -84, 80, -56, 29, -16, -74, 81, 42, 47, 96, 64, -86, 87, -53, 84, -71, -97, 71, 77, -64, -43, 65, 23, -18, -75, -33, -43, -76, 75, -25, -65, -45, -85, 30, 11, -77, -99, 39, 74, -94, 52, 2, 43, 43, 46, -84, 85, 16, -98, 56, 36, 97, 75, -32, 13, -71, 93, 94, -58, -71, 93, -50, 91, 17, -60, 91, -28, -83, -10, -68, 95, 15, -24, 52, 5, 68]
36
[27, -46, -15, 39, 15, 75, 78, 22, 2, -20, 97, 21, -21, -89, 90, 57, -25, -31, 32, 32, 92, 34, 81, 99, 84, -100, -31, 37, 68, -54, -4, 15, -78, 39, -28, 83, 17, -24, -35, -51, 0, 71, -1, 62, 67, 55, -77]
13
[30, -99, -81, 35, 53, -85, -92, -12, 68, -84, -38, -34, 51, -86, 72, -63, -62, -66, -81, -45, -71, -39, 11, -74, 93, -78, 63, 98, -100, 2, 8, 65, -92, -19, -86, 80, 91, 14, 86, -43, -83, 17, 29, -89, -30, 80, -55, -37, 1, -39]
5
[0, -4, -17, -96, 58, -13, 94, 47, 23, -2, -22, -45, 77, -34, -23, -98, -38, 19, -70, 47, 45, -89, 19, 76, -77, -5, -23, 82, 76, 44, -19, 9, 54, -37, 41, -96, 97, 19, 54, 95, -47, 60, 51, 45, -1, -71, 90, 57, 32]
17
[-2, -10, 13, -58, 73, 83, 60, 52, -29, -34, -1, -39, -13, 47, 90, -14, 4, 19, 55, 23, 73, -36, 14, -13, 91, 52, -44, -32, 60, -18, -83, -24, -25, -71, 32, -75, 33, 79, -1, -38, -10, 18, -2]
11
*/